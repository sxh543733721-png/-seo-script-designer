// 知识库系统 - Knowledge Base System

const WEGIC_KNOWLEDGE = {
    name: "Wegic",
    description: "AI Website Builder",
    keyInfo: {
        // 核心定位
        positioning: "Wegic是你的AI网站团队 - 包含AI设计师、开发者和管理员。只需对话，网站就会被构建、运行并轻松更新。",
        
        // 核心特点
        coreFeatures: [
            "60秒对话建站 - 通过对话即可创建完全定制的网站",
            "零代码要求 - 无需任何编程技能",
            "一键发布 - 发布网站只需一次点击",
            "AI自动管理 - AI Manager确保网站自动保持更新",
            "多语言支持 - 帮助全球用户轻松沟通",
            "完美适配 - 确保网站在所有设备上完美显示"
        ],
        
        // 三步建站流程
        buildingProcess: [
            "第一步：与Wegic对话，表达你的网站偏好和需求",
            "第二步：Wegic引导你完成设计过程，根据输入提供建议和调整",
            "第三步：对设计满意后，Wegic让你轻松发布网站，确保受众可以访问"
        ],
        
        // 关键数据
        statistics: {
            websites: "300,000+",
            countries: "220+",
            timeframe: "过去6个月",
            target: "首次用户和专业人士"
        },
        
        // 核心优势
        advantages: [
            "💬 对话式便利 - 用自然语言与Wegic互动，轻松创建网站",
            "🚀 轻松部署 - 只需几次点击就能用自定义域名发布作品，无需编码",
            "🎨 量身定制 - 完全按照你的想象个性化网站，Wegic每一步都会指导",
            "📱 自适应设计 - 从设计到上线，Wegic确保网站在所有设备上都美观"
        ],
        
        // 功能亮点
        functionalHighlights: [
            "手动编辑功能 - 编辑页面、修改站点头部、更改字体和主题、编辑文本和链接",
            "AI聊天编辑 - 通过AI对话修改样式和布局、添加网页动画",
            "嵌入媒体 - 添加视频和音频、表单和预订、嵌入第三方工具",
            "SEO和营销 - 添加SEO标题和描述、高级SEO功能、网站验证",
            "发布管理 - 自定义域名、网站设置、账户管理"
        ],
        
        // 使用场景
        useCases: [
            "企业官网 - 快速建立专业的公司网站",
            "个人品牌 - 展示个人作品和简历",
            "电商网站 - 创建在线商店",
            "作品集 - 设计师、摄影师展示作品",
            "博客 - 分享内容和见解",
            "活动页面 - 宣传活动和收集报名"
        ],
        
        // 目标用户
        targetAudience: [
            "首次建站用户 - 无技术背景的初学者",
            "中小企业主 - 需要快速建立在线存在",
            "创业者 - 快速验证想法和推出MVP",
            "自由职业者 - 展示服务和作品",
            "设计师 - 无需编码即可实现设计",
            "营销人员 - 快速创建营销页面"
        ]
    }
};

const SEO_KNOWLEDGE = {
    name: "SEO最佳实践",
    description: "Google搜索优化指南",
    keyInfo: {
        // 通用SEO原则
        generalPrinciples: [
            "创建实用、可靠、以用户为中心的内容",
            "确保内容易于抓取和编入索引",
            "优化页面元数据（标题、描述、标签）",
            "使用结构化数据增强搜索结果呈现",
            "确保网站移动端友好",
            "提供清晰的网站结构和导航",
            "优化页面加载速度",
            "建立高质量的反向链接"
        ],
        
        // 视频SEO最佳实践
        videoSEO: {
            essential: [
                "使用清晰描述性的视频标题 - 包含主关键词，60字符以内",
                "编写详细的视频描述 - 至少200字，前3行最重要",
                "添加相关标签和关键词 - 使用品牌词和主题词",
                "创建吸引人的缩略图 - 1280x720高清，文字清晰",
                "添加字幕和文字稿 - 提高可访问性和SEO",
                "使用视频结构化数据 - VideoObject schema",
                "优化视频文件名 - 使用描述性关键词",
                "提供高质量原创内容 - 独特价值和深度信息"
            ],
            scriptStructure: [
                "前3秒黄金法则 - 用问题、数据或冲突抓住注意力",
                "痛点共鸣 - 让观众产生'这说的就是我'的感觉",
                "解决方案展示 - 清晰的步骤或方法论",
                "社会证明 - 数据、案例、用户评价增强可信度",
                "视觉化描述 - 用词让观众能在脑海中形成画面",
                "时间戳章节 - 方便观众跳转和搜索引擎理解",
                "强CTA结尾 - 明确告诉观众下一步做什么",
                "留钩子 - 引导观看更多相关内容"
            ],
            contentTechniques: [
                "说故事法 - 用真实案例增加代入感",
                "数字具象化 - 将抽象概念转化为具体数字",
                "对比法 - 传统方式 vs 新方法的对比",
                "痛点放大 - 深挖问题的严重性",
                "快速见效承诺 - 告诉观众能立即获得什么",
                "降低门槛 - 强调简单、无需专业知识",
                "紧迫感营造 - 限时、限量、趋势等",
                "互动引导 - 问问题、征集评论、投票等"
            ],
            engagement: [
                "前15秒决定80%的留存率",
                "每10-15秒一个信息点或视觉变化",
                "使用'你'而不是'我们'增加对话感",
                "提问引发思考和参与",
                "在关键点重复核心信息",
                "结尾预告下期内容增加订阅"
            ]
        },
        
        // 平台特定SEO
        platformSpecific: {
            YouTube: {
                title: "60字符以内，包含主关键词",
                description: "前3行最重要，包含关键信息和链接",
                tags: "使用相关标签，包括品牌标签",
                thumbnail: "1280x720分辨率，吸引眼球",
                engagement: "鼓励点赞、评论、订阅、分享"
            },
            抖音: {
                title: "简短有力，使用热门话题标签",
                description: "前几秒抓住注意力",
                hashtags: "结合热门和细分话题标签",
                music: "使用热门音乐提高曝光",
                timing: "在用户活跃时间发布"
            },
            小红书: {
                title: "种草式标题，使用表情符号",
                cover: "精美封面图，添加文字说明",
                tags: "精准标签，不超过10个",
                content: "真实分享，提供价值",
                interaction: "及时回复评论"
            },
            B站: {
                title: "详细标题，包含关键词",
                tags: "准确分类标签",
                cover: "三连封面设计",
                description: "完整的视频介绍和时间轴",
                partition: "选择正确的分区"
            }
        },
        
        // 搜索结果呈现元素
        searchAppearance: {
            titleLink: {
                purpose: "标题链接是用户在搜索结果中看到的可点击标题",
                bestPractices: [
                    "简洁描述页面内容",
                    "避免使用点击诱饵",
                    "每个页面使用唯一标题",
                    "品牌名称放在末尾",
                    "长度控制在60字符以内"
                ]
            },
            snippet: {
                purpose: "摘要是标题下方的描述文本",
                bestPractices: [
                    "提供准确的内容摘要",
                    "包含关键信息和价值主张",
                    "使用自然语言",
                    "长度控制在150-160字符",
                    "包含行动导向的语言"
                ]
            },
            structuredData: {
                purpose: "结构化数据帮助搜索引擎理解内容",
                types: [
                    "视频 - VideoObject",
                    "文章 - Article",
                    "产品 - Product",
                    "评价 - Review",
                    "常见问题 - FAQPage",
                    "How-to - HowTo",
                    "事件 - Event"
                ]
            }
        },
        
        // 内容优化策略
        contentStrategy: {
            research: [
                "了解目标受众搜索意图",
                "研究相关关键词和问题",
                "分析竞争对手内容",
                "识别内容空白机会"
            ],
            creation: [
                "提供独特价值和见解",
                "使用清晰的标题层级",
                "包含相关的图片和视频",
                "优化内容可读性",
                "添加内部和外部链接"
            ],
            optimization: [
                "自然融入关键词",
                "优化元标题和描述",
                "使用相关的alt文本",
                "确保内容新鲜度",
                "定期更新和改进"
            ]
        },
        
        // 技术SEO要点
        technicalSEO: [
            "使用HTTPS保护网站",
            "创建和提交XML站点地图",
            "优化robots.txt文件",
            "实现规范URL",
            "修复404错误和死链接",
            "优化URL结构",
            "实现面包屑导航",
            "优化图片大小和格式"
        ]
    }
};

// 知识库匹配系统
function matchKnowledgeBase(topic, additionalInfo = '') {
    const content = `${topic} ${additionalInfo}`.toLowerCase();
    const knowledge = [];
    
    // 检测Wegic相关
    const wegicKeywords = ['wegic', '建站', 'website builder', '网站制作', 'ai建站', '无代码'];
    if (wegicKeywords.some(keyword => content.includes(keyword))) {
        knowledge.push('wegic');
    }
    
    // SEO知识库始终加载
    knowledge.push('seo');
    
    return knowledge;
}

// 获取知识库内容
function getKnowledgeContent(knowledgeTypes) {
    let content = '';
    
    if (knowledgeTypes.includes('wegic')) {
        content += `\n【Wegic 知识库】\n`;
        content += `产品定位：${WEGIC_KNOWLEDGE.keyInfo.positioning}\n\n`;
        content += `核心特点：\n${WEGIC_KNOWLEDGE.keyInfo.coreFeatures.map(f => `- ${f}`).join('\n')}\n\n`;
        content += `关键数据：全球${WEGIC_KNOWLEDGE.keyInfo.statistics.countries}个国家和地区，${WEGIC_KNOWLEDGE.keyInfo.statistics.websites}个网站\n\n`;
        content += `建站流程：\n${WEGIC_KNOWLEDGE.keyInfo.buildingProcess.map((s, i) => `${i + 1}. ${s}`).join('\n')}\n\n`;
        content += `核心优势：\n${WEGIC_KNOWLEDGE.keyInfo.advantages.join('\n')}\n\n`;
    }
    
    if (knowledgeTypes.includes('seo')) {
        content += `\n【SEO 知识库】\n`;
        content += `通用原则：\n${SEO_KNOWLEDGE.keyInfo.generalPrinciples.slice(0, 5).map(p => `- ${p}`).join('\n')}\n\n`;
        content += `视频SEO要点：\n${SEO_KNOWLEDGE.keyInfo.videoSEO.essential.slice(0, 6).map(e => `- ${e}`).join('\n')}\n`;
    }
    
    return content;
}

// 获取平台特定的SEO知识
function getPlatformSEOKnowledge(platform) {
    const platformKey = platform === 'B站' ? 'B站' : 
                       platform === '抖音' || platform.toLowerCase().includes('tiktok') ? '抖音' :
                       platform === '小红书' ? '小红书' :
                       platform === 'YouTube' ? 'YouTube' : null;
    
    if (!platformKey || !SEO_KNOWLEDGE.keyInfo.platformSpecific[platformKey]) {
        return '';
    }
    
    const platformSEO = SEO_KNOWLEDGE.keyInfo.platformSpecific[platformKey];
    let content = `\n【${platform} SEO 专项知识】\n`;
    
    Object.entries(platformSEO).forEach(([key, value]) => {
        content += `${key}: ${value}\n`;
    });
    
    return content;
}

module.exports = {
    WEGIC_KNOWLEDGE,
    SEO_KNOWLEDGE,
    matchKnowledgeBase,
    getKnowledgeContent,
    getPlatformSEOKnowledge
};

